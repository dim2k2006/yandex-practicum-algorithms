// ID Ð¿Ð¾ÑÑ‹Ð»ÐºÐ¸: 65397933

/*
-- ÐŸÐ Ð˜ÐÐ¦Ð˜ÐŸ Ð ÐÐ‘ÐžÐ¢Ð« --
Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð» Ð´ÐµÐº Ð½Ð° ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð½Ð¾Ð¹ Ð²ÐµÑ€ÑÐ¸Ð¸ Ð¾Ð±ÑŠÐµÑ‚Ð° - Map, Ð³Ð´Ðµ ÐºÐ°Ð¶Ð´Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð´ÐµÐºÐ° Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑÑ Ð¿Ð¾Ð´ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð½Ñ‹Ð¼ ÐºÐ»ÑŽÑ‡Ð¾Ð¼.

Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽ Ð´Ð²Ð° ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»Ñ: Ð¾Ð´Ð¸Ð½ Ð´Ð»Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ "Ð¿ÐµÑ€ÐµÐ´Ð½ÐµÐ³Ð¾" ÐºÐ»ÑŽÑ‡Ð°, Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð´Ð»Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ "Ð·Ð°Ð´Ð½ÐµÐ³Ð¾" ÐºÐ»ÑŽÑ‡Ð°.

ÐŸÑ€Ð¸ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ð¸ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð° Ð² Ð´ÐµÐº, Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ ÐºÐ»ÑŽÑ‡ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð³Ð¾ "Ð¿ÐµÑ€ÐµÐ´Ð½ÐµÐ³Ð¾" Ð¸Ð»Ð¸ "Ð·Ð°Ð´Ð½ÐµÐ³Ð¾" ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°, ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð´ ÑÑ‚Ð¸Ð¼ ÐºÐ»ÑŽÑ‡Ð¾Ð¼ Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ ÑÑ‚Ð¾Ð³Ð¾ ÐºÐ»ÑŽÑ‡Ð°.

ÐŸÑ€Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð° Ð¸Ð· Ð´ÐµÐºÐ°, ÑƒÐ´Ð°Ð»ÑÐµÐ¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð¿Ð¾Ð´ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¼ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ð¼ ÐºÐ»ÑŽÑ‡Ð¾Ð¼, Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼ Ð½Ð¾Ð²Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ ÐºÐ»ÑŽÑ‡Ð° Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ ÐµÐ³Ð¾.

Ð˜Ð·Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾ Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð» Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ¾Ð»ÑŒÑ†ÐµÐ²Ð¾Ð¹ Ð±ÑƒÑ„ÐµÑ€, Ð½Ð¾ Ð¿Ð¾Ð·Ð¶Ðµ Ð¿Ð¾Ð½ÑÐ» Ñ‡Ñ‚Ð¾ Ñ‚Ð°Ðº Ð½Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑÑ. Ð’ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ðµ Ð½Ðµ Ð±ÐµÐ· Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚Ð° Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð»Ð¾ÑÑŒ Ð²Ð¾Ñ‚ Ñ‚Ð°ÐºÐ¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ.

-- Ð”ÐžÐšÐÐ—ÐÐ¢Ð•Ð›Ð¬Ð¡Ð¢Ð’Ðž ÐšÐžÐ Ð Ð•ÐšÐ¢ÐÐžÐ¡Ð¢Ð˜ --
ÐÐµ Ð¸Ð¼ÐµÑŽ Ð¾Ð¿Ñ‹Ñ‚Ð° Ð´Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒÑÑ‚Ð² ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ÑÑ‚Ð¸ Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼Ð¾Ð², Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð·Ð°Ñ‚Ñ€ÑƒÐ´Ð½ÑÑŽÑÑŒ Ð¾Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÑÑ‚Ñƒ Ñ‡Ð°ÑÑ‚ÑŒ.
Ð­Ñ‚Ð¾Ñ‚ Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼ Ð¿Ñ€Ð¾ÑˆÐµÐ» Ð²ÑÐµ Ñ‚ÐµÑÑ‚Ñ‹, Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð¾Ð½ ÑÐºÐ¾Ñ€ÐµÐµ Ð²ÑÐµÐ³Ð¾ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ ðŸ™ˆ

-- Ð’Ð Ð•ÐœÐ•ÐÐÐÐ¯ Ð¡Ð›ÐžÐ–ÐÐžÐ¡Ð¢Ð¬ --

Ð¢Ðº Ð¾Ð¿ÐµÑ€Ñ†Ð¸Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð² Map Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑŽÑ‚ÑÑ Ð·Ð° O(1), Ñ‚Ð¾ Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ Ð² Ð´ÐµÐº Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑŽÑ‚ÑÑ Ð·Ð° O(1).

-- ÐŸÐ ÐžÐ¡Ð¢Ð ÐÐÐ¡Ð¢Ð’Ð•ÐÐÐÐ¯ Ð¡Ð›ÐžÐ–ÐÐžÐ¡Ð¢Ð¬ --

Ð¢Ðº Ð¼Ñ‹ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð²ÑÐµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð² Ð´ÐµÐº, Ñ‚Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ð´ÐµÐº Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð»ÑÑ‚ÑŒ O(n) Ð¿Ð°Ð¼ÑÑ‚Ð¸.

 */

class Deque {
  constructor(maxSize) {
    this.maxSize = maxSize;
    this.data = new Map();
    this.front = 0;
    /*
      ÐÐ°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ this.back Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ñ€Ð°Ð²Ð½Ð¾ 1, Ð´Ð»Ñ Ñ‚Ð¾Ð³Ð¾, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¼Ð¾Ð¶Ð½Ð¾ Ð±Ñ‹Ð»Ð¾ ÑƒÐ´Ð°Ð»ÑÑ‚ÑŒ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ñ Ð¾Ð±ÐµÐ¸Ñ… ÑÑ‚Ð¾Ñ€Ð¾Ð½.

      ÐŸÑ€Ð¸Ð¼ÐµÑ€ 1 (Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾, ÑƒÐ´Ð°Ð»ÑÐµÐ¼ Ð¸Ð· ÐºÐ¾Ð½Ñ†Ð°):
       - Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ this.front = 0, this.back = 1
       - Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð´ÐµÐºÐ°
       - this.front = 1, this.back = 1
       - Ð² Ñ‚Ð°ÐºÐ¾Ð¼ ÑÐ»ÑƒÑ‡Ð°Ðµ, Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ñ Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ð¹ ÐµÐ´Ð¸Ð½Ð¸Ñ†Ðµ Ð² this.back Ñƒ Ð½Ð°Ñ ÐµÑÑ‚ÑŒ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð¸Ð· ÐºÐ¾Ð½Ñ†Ð° Ð´ÐµÐºÐ°

      ÐŸÑ€Ð¸Ð¼ÐµÑ€ 2 (Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð² ÐºÐ¾Ð½ÐµÑ†, ÑƒÐ´Ð°Ð»ÑÐµÐ¼ Ð¸Ð· Ð½Ð°Ñ‡Ð°Ð»Ð°):
        - Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ this.front = 0, this.back = 1
        - Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð² ÐºÐ¾Ð½ÐµÑ† Ð´ÐµÐºÐ°
        - this.front = 0, this.back = 0
        - Ð² Ñ‚Ð°ÐºÐ¾Ð¼ ÑÐ»ÑƒÑ‡Ð°Ðµ Ñ‚Ðº Ð¸ this.front = 0 Ð¸ this.back = 0, Ñƒ Ð½Ð°Ñ ÐµÑÑ‚ÑŒ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð¸Ð· Ð½Ð°Ñ‡Ð°Ð»Ð° Ð´ÐµÐºÐ°
    */
    this.back = 1;
    this.sizeValue = 0;
  }

  push_front(value) {
    if (this.isFull()) return 'error';

    this.front = (this.front + 1) % this.maxSize;

    this.sizeValue = this.sizeValue + 1;

    this.data.set(this.front, value);
  }

  pop_front() {
    if (this.isEmpty()) return 'error';

    const result = this.data.get(this.front);

    this.data.delete(this.front);

    this.front = (this.front || this.maxSize) - 1;

    this.sizeValue = this.sizeValue - 1;

    return result;
  }

  push_back(value) {
    if (this.isFull()) return 'error';

    this.back = (this.back || this.maxSize) - 1;

    this.data.set(this.back, value);

    this.sizeValue = this.sizeValue + 1;
  }

  pop_back() {
    if (this.isEmpty()) return 'error';

    const result = this.data.get(this.back);

    this.data.delete(this.back);

    this.back = (this.back + 1) % this.maxSize;

    this.sizeValue = this.sizeValue - 1;

    return result;
  }

  isFull() {
    return this.size() === this.maxSize;
  }

  isEmpty() {
    return this.size() === 0;
  }

  size() {
    return this.sizeValue;
  }
}

exports.Deque = Deque;

// Yandex context required code
// const executeStackCommand = (deque, commandName, ...args) => {
//   const result = deque[commandName](...args);
//
//   if (commandName === 'push_back' && result === 'error') {
//     console.log(result);
//
//     return;
//   }
//
//   if (commandName === 'push_front' && result === 'error') {
//     console.log(result);
//
//     return;
//   }
//
//   if (result !== undefined) {
//     console.log(result);
//   }
// };
//
// const _readline = require('readline');
//
// const _reader = _readline.createInterface({
//   input: process.stdin,
// });
//
// const _inputLines = [];
//
// _reader.on('line', (line) => {
//   _inputLines.push(line);
// });
//
// const solve = () => {
//   const commandsCount = Number(_inputLines[0]);
//   const dequeMaxSize = Number(_inputLines[1]);
//   const commands = [...new Array(commandsCount)].map((item, index) => {
//     const commandString = _inputLines[index + 2];
//     const [commandName, commandValue] = commandString.split(' ');
//
//     return [commandName, commandValue ? Number(commandValue) : undefined];
//   });
//
//   const deque = new Deque(dequeMaxSize);
//
//   commands.forEach((commandList) => {
//     const [commandName, commandValue] = commandList;
//
//     executeStackCommand(deque, commandName, commandValue);
//   });
// };
//
// process.stdin.on('end', solve);
